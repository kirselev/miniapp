{"ast":null,"code":"import _toConsumableArray from \"/Users/kirill/on_hack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/kirill/on_hack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/kirill/on_hack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/kirill/on_hack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/kirill/on_hack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/kirill/on_hack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/kirill/on_hack/src/App.js\";\n// import 'core-js/es6/map';\n// import 'core-js/es6/set';\nimport React from 'react';\nimport connect from '@vkontakte/vkui-connect';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport { ModalRoot, Panel, ListItem, List, Slider, Progress, HeaderButton, SelectMimicry, FixedLayout, Tabs, TabsItem, FormLayoutGroup, Cell, InfoRow, ModalPage, View, ModalPageHeader, Radio, Button, FormLayout, Group, Input, Checkbox, Div, Avatar, PanelHeader, platform, IOS } from '@vkontakte/vkui';\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\nimport Icon24Cancel from '@vkontakte/icons/dist/24/cancel';\nimport Icon24Done from '@vkontakte/icons/dist/24/done';\nimport Icon24Dismiss from '@vkontakte/icons/dist/24/dismiss';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\nimport songs from './audio/songs';\nimport Sound from 'react-sound';\nimport getMP3Duration from 'get-mp3-duration';\nimport Start from './panels/Start';\nimport PlayerControls from './panels/PlayerControls';\nimport SongSelector from './panels/SongSelector';\nimport Home from './panels/Home';\nimport Scaner from './panels/QrScaner';\nimport Audio from './panels/Audio';\nimport Maps from './panels/Maps';\nvar MODAL_PAGE_MUSIC = 'music';\nvar osname = platform();\nvar IS_PLATFORM_ANDROID = osname != IOS;\nvar IS_PLATFORM_IOS = osname != IOS;\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.handleSongSelected = function (song) {\n      _this.setState({\n        currentSong: song,\n        position: 0\n      });\n    };\n\n    _this.go = function (e) {\n      _this.setState({\n        activePanel: e.currentTarget.dataset.to\n      });\n    };\n\n    _this.state = {\n      activePanel: 'home',\n      fetchedUser: null,\n      activeModal: null,\n      modalHistory: [],\n      currentSong: songs[0],\n      position: 0,\n      volume: 100,\n      playbackRate: 1,\n      loop: false,\n      playStatus: Sound.status.PAUSED\n    };\n\n    _this.modalBack = function (e) {\n      _this.setActiveModal(_this.state.modalHistory[_this.state.modalHistory.length - 2]);\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"setActiveModal\",\n    value: function setActiveModal(activeModal) {\n      activeModal = activeModal || null;\n      var modalHistory = this.state.modalHistory ? _toConsumableArray(this.state.modalHistory) : [];\n\n      if (activeModal === null) {\n        modalHistory = [];\n      } else if (modalHistory.indexOf(activeModal) !== -1) {\n        modalHistory = modalHistory.splice(0, modalHistory.indexOf(activeModal) + 1);\n      } else {\n        modalHistory.push(activeModal);\n      }\n\n      this.setState({\n        activeModal: activeModal,\n        modalHistory: modalHistory\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      connect.subscribe(function (e) {\n        switch (e.detail.type) {\n          case 'VKWebAppGetUserInfoResult':\n            _this2.setState({\n              fetchedUser: e.detail.data\n            });\n\n            break;\n\n          default:\n            console.log(e.detail.type);\n        }\n      });\n      connect.send('VKWebAppGetUserInfo', {});\n    }\n  }, {\n    key: \"getStatusText\",\n    value: function getStatusText() {\n      switch (this.state.playStatus) {\n        case Sound.status.PLAYING:\n          return 'playing';\n\n        case Sound.status.PAUSED:\n          return 'paused';\n\n        case Sound.status.STOPPED:\n          return 'stopped';\n\n        default:\n          return '(unknown)';\n      }\n    }\n  }, {\n    key: \"renderCurrentSong\",\n    value: function renderCurrentSong() {\n      return React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"Current song \", this.state.currentSong.title, \". Song is \", this.getStatusText());\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          volume = _this$state.volume,\n          playbackRate = _this$state.playbackRate,\n          loop = _this$state.loop;\n      var modal = React.createElement(ModalRoot, {\n        activeModal: this.state.activeModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(ModalPage, {\n        id: MODAL_PAGE_MUSIC,\n        onClose: this.modalBack,\n        header: React.createElement(ModalPageHeader, {\n          left: IS_PLATFORM_ANDROID && React.createElement(HeaderButton, {\n            onClick: this.modalBack,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 124\n            },\n            __self: this\n          }, React.createElement(Icon24Cancel, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 124\n            },\n            __self: this\n          })),\n          right: React.createElement(HeaderButton, {\n            onClick: this.modalBack,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 125\n            },\n            __self: this\n          }, IS_PLATFORM_IOS ? 'Готово' : React.createElement(Icon24Done, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 125\n            },\n            __self: this\n          })),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        }, \"\\u0424\\u0438\\u043B\\u044C\\u0442\\u0440\\u044B\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(Group, {\n        title: \"Player\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(Div, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(SongSelector, {\n        songs: songs,\n        selectedSong: this.state.currentSong,\n        onSongSelected: this.handleSongSelected,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }), React.createElement(Div, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(InfoRow, {\n        title: this.state.currentSong.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(Progress, {\n        value: this.state.position / this.state.currentSong.duration * 100,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }))), React.createElement(FormLayout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(Slider, {\n        min: 0,\n        max: 100,\n        value: Number(this.state.volume),\n        onChange: function onChange(value) {\n          return _this3.setState({\n            volume: value\n          });\n        },\n        top: \"Volume\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      })), React.createElement(FormLayout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(Slider, {\n        min: 0,\n        max: 5,\n        value: Number(this.state.playbackRate),\n        onChange: function onChange(value) {\n          return _this3.setState({\n            playbackRate: value\n          });\n        },\n        top: \"Playback Rate\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      })), React.createElement(PlayerControls, {\n        playStatus: this.state.playStatus,\n        loop: loop,\n        onPlay: function onPlay() {\n          return _this3.setState({\n            playStatus: Sound.status.PLAYING\n          });\n        },\n        onPause: function onPause() {\n          return _this3.setState({\n            playStatus: Sound.status.PAUSED\n          });\n        },\n        onResume: function onResume() {\n          return _this3.setState({\n            playStatus: Sound.status.PLAYING\n          });\n        },\n        onStop: function onStop() {\n          return _this3.setState({\n            playStatus: Sound.status.STOPPED,\n            position: 0\n          });\n        },\n        onSeek: function onSeek(position) {\n          return _this3.setState({\n            position: position\n          });\n        },\n        onToggleLoop: function onToggleLoop(e) {\n          return _this3.setState({\n            loop: e.target.checked\n          });\n        },\n        duration: this.state.currentSong ? this.state.currentSong.duration : 0,\n        position: this.state.position,\n        playbackRate: playbackRate,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      })))));\n      var audioPlayer = React.createElement(Group, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(Div, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, this.state.playStatus == Sound.status.PLAYING && React.createElement(Sound, {\n        url: this.state.currentSong.url,\n        playStatus: this.state.playStatus,\n        position: this.state.position,\n        volume: volume,\n        playbackRate: playbackRate,\n        loop: loop,\n        onLoading: function onLoading(_ref) {\n          var bytesLoaded = _ref.bytesLoaded,\n              bytesTotal = _ref.bytesTotal;\n          return console.log(\"\".concat(bytesLoaded / bytesTotal * 100, \"% loaded\"));\n        },\n        onLoad: function onLoad() {\n          return console.log('Loaded');\n        },\n        onPlaying: function onPlaying(_ref2) {\n          var position = _ref2.position;\n          return _this3.setState({\n            position: position\n          });\n        },\n        onFinishedPlaying: function onFinishedPlaying() {\n          return _this3.setState({\n            playStatus: Sound.status.STOPPED\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      })), React.createElement(FixedLayout, {\n        vertical: \"bottom\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(Button, {\n        size: \"xl\",\n        level: \"secondary\",\n        onClick: function onClick() {\n          return _this3.setActiveModal(MODAL_PAGE_MUSIC);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, \"\\u041E\\u0442\\u043A\\u0440\\u044B\\u0442\\u044C \\u043C\\u043E\\u0434\\u0430\\u043B\\u044C\\u043D\\u0443\\u044E \\u0441\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0443\")));\n      return React.createElement(View, {\n        activePanel: this.state.activePanel,\n        modal: modal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(Home, {\n        id: \"home\",\n        fetchedUser: this.state.fetchedUser,\n        go: this.go,\n        player: audioPlayer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }), React.createElement(Start, {\n        id: \"scaner\",\n        go: this.go,\n        player: audioPlayer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }), React.createElement(Audio, {\n        id: \"audio\",\n        go: this.go,\n        player: audioPlayer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }), React.createElement(Maps, {\n        id: \"maps\",\n        go: this.go,\n        player: audioPlayer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport default App;","map":{"version":3,"sources":["/Users/kirill/on_hack/src/App.js"],"names":["React","connect","ModalRoot","Panel","ListItem","List","Slider","Progress","HeaderButton","SelectMimicry","FixedLayout","Tabs","TabsItem","FormLayoutGroup","Cell","InfoRow","ModalPage","View","ModalPageHeader","Radio","Button","FormLayout","Group","Input","Checkbox","Div","Avatar","PanelHeader","platform","IOS","Icon28ChevronBack","Icon24Cancel","Icon24Done","Icon24Dismiss","Icon24Back","songs","Sound","getMP3Duration","Start","PlayerControls","SongSelector","Home","Scaner","Audio","Maps","MODAL_PAGE_MUSIC","osname","IS_PLATFORM_ANDROID","IS_PLATFORM_IOS","App","props","handleSongSelected","song","setState","currentSong","position","go","e","activePanel","currentTarget","dataset","to","state","fetchedUser","activeModal","modalHistory","volume","playbackRate","loop","playStatus","status","PAUSED","modalBack","setActiveModal","length","indexOf","splice","push","subscribe","detail","type","data","console","log","send","PLAYING","STOPPED","title","getStatusText","modal","duration","Number","value","target","checked","audioPlayer","url","bytesLoaded","bytesTotal","Component"],"mappings":"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","sourcesContent":["// import 'core-js/es6/map';\n// import 'core-js/es6/set';\nimport React from 'react';\nimport connect from '@vkontakte/vkui-connect';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport { ModalRoot, Panel, ListItem, List, Slider, Progress, HeaderButton, SelectMimicry, FixedLayout, Tabs, TabsItem, FormLayoutGroup, Cell, InfoRow, ModalPage, View, ModalPageHeader, Radio, Button, FormLayout, Group, Input, Checkbox, Div, Avatar, PanelHeader,  platform, IOS} from '@vkontakte/vkui';\nimport Icon28ChevronBack from '@vkontakte/icons/dist/28/chevron_back';\nimport Icon24Cancel from '@vkontakte/icons/dist/24/cancel';\nimport Icon24Done from '@vkontakte/icons/dist/24/done';\nimport Icon24Dismiss from '@vkontakte/icons/dist/24/dismiss';\nimport Icon24Back from '@vkontakte/icons/dist/24/back';\nimport songs from './audio/songs';\nimport Sound from 'react-sound';\nimport getMP3Duration from 'get-mp3-duration';\nimport Start from './panels/Start'\n\nimport PlayerControls from './panels/PlayerControls';\nimport SongSelector from './panels/SongSelector';\nimport Home from './panels/Home';\nimport Scaner from './panels/QrScaner';\nimport Audio from './panels/Audio';\nimport Maps from './panels/Maps';\n\nconst MODAL_PAGE_MUSIC = 'music';\n\nconst osname = platform();\nconst IS_PLATFORM_ANDROID = osname != IOS;\nconst IS_PLATFORM_IOS = osname != IOS;\n\nclass App extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tactivePanel: 'home',\n\t\t\tfetchedUser: null,\n\t\t\tactiveModal: null,\n\t\t\tmodalHistory: [],\n\t\t\tcurrentSong: songs[0],\n\t\t\tposition: 0,\n\t\t\tvolume: 100,\n\t\t\tplaybackRate: 1,\n\t\t\tloop: false,\n\t\t\tplayStatus: Sound.status.PAUSED,\n\t\t};\n\n\t\tthis.modalBack = (e) => {\n\t\t\tthis.setActiveModal(this.state.modalHistory[this.state.modalHistory.length - 2]);\n\t\t};\n\t}\n\n\tsetActiveModal(activeModal) {\n\t\tactiveModal = activeModal || null;\n\t\tlet modalHistory = this.state.modalHistory ? [...this.state.modalHistory] : [];\n\n\t\tif (activeModal === null) {\n\t\t\tmodalHistory = [];\n\t\t} else if (modalHistory.indexOf(activeModal) !== -1) {\n\t\t\tmodalHistory = modalHistory.splice(0, modalHistory.indexOf(activeModal) + 1);\n\t\t} else {\n\t\t\tmodalHistory.push(activeModal);\n\t\t}\n\n\t\tthis.setState({\n\t\t\tactiveModal,\n\t\t\tmodalHistory\n\t\t});\n\t};\n\n\n\tcomponentDidMount() {\n\t\tconnect.subscribe((e) => {\n\t\t\tswitch (e.detail.type) {\n\t\t\t\tcase 'VKWebAppGetUserInfoResult':\n\t\t\t\t\tthis.setState({ fetchedUser: e.detail.data });\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.log(e.detail.type);\n\t\t\t}\n\t\t});\n\t\tconnect.send('VKWebAppGetUserInfo', {});\n\t}\n\n\tgetStatusText() {\n\t\tswitch (this.state.playStatus) {\n\t\t\tcase Sound.status.PLAYING:\n\t\t\t\treturn 'playing';\n\t\t\tcase Sound.status.PAUSED:\n\t\t\t\treturn 'paused';\n\t\t\tcase Sound.status.STOPPED:\n\t\t\t\treturn 'stopped';\n\t\t\tdefault:\n\t\t\t\treturn '(unknown)';\n\t\t}\n\t}\n\n\thandleSongSelected = (song) => {\n    this.setState({ currentSong: song, position: 0});\n  }\n\n  renderCurrentSong() {\n    return (\n      <p>\n        Current song {this.state.currentSong.title}. Song is {this.getStatusText()}\n      </p>\n    );\n  }\n\n\tgo = (e) => {\n\t\tthis.setState({ activePanel: e.currentTarget.dataset.to })\n\t};\n\n\trender() {\n\n\t\tconst { volume, playbackRate, loop } = this.state;\n\n\t\tconst modal = (\n\t\t\t<ModalRoot activeModal={this.state.activeModal}>\n\t\t\t\t<ModalPage\n\t\t\t\t\tid={MODAL_PAGE_MUSIC}\n\t\t\t\t\tonClose={this.modalBack}\n\t\t\t\t\theader={\n\t\t\t\t\t\t<ModalPageHeader\n\t\t\t\t\t\t\tleft={IS_PLATFORM_ANDROID && <HeaderButton onClick={this.modalBack}><Icon24Cancel /></HeaderButton>}\n\t\t\t\t\t\t\tright={<HeaderButton onClick={this.modalBack}>{IS_PLATFORM_IOS ? 'Готово' : <Icon24Done />}</HeaderButton>}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tФильтры\n\t\t\t\t\t\t</ModalPageHeader>\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t<Group title=\"Player\">\n\t\t\t\t\t<Div>\n\t\t\t\t\t\t<SongSelector\n\t\t\t\t\t\t\tsongs={songs}\n\t\t\t\t\t\t\tselectedSong={this.state.currentSong}\n\t\t\t\t\t\t\tonSongSelected={this.handleSongSelected}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Div>\n\t\t\t\t\t\t\t<InfoRow title={this.state.currentSong.title}>\n\t\t\t\t\t\t\t\t<Progress value={this.state.position/this.state.currentSong.duration * 100} />\n\t\t\t\t\t\t\t</InfoRow>\n\t\t\t\t\t\t</Div>\n\t\t\t\t\t\t<FormLayout>\n\t\t\t\t\t\t\t<Slider\n\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\tmax={100}\n\t\t\t\t\t\t\t\tvalue={Number(this.state.volume)}\n\t\t\t\t\t\t\t\tonChange={value => this.setState({volume: value})}\n\t\t\t\t\t\t\t\ttop=\"Volume\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FormLayout>\n\t\t\t\t\t\t<FormLayout>\n\t\t\t\t\t\t\t<Slider\n\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\tmax={5}\n\t\t\t\t\t\t\t\tvalue={Number(this.state.playbackRate)}\n\t\t\t\t\t\t\t\tonChange={value => this.setState({playbackRate: value})}\n\t\t\t\t\t\t\t\ttop=\"Playback Rate\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</FormLayout>\n\t\t\t\t\t\t<PlayerControls\n\t\t\t\t\t\t\tplayStatus={this.state.playStatus}\n\t\t\t\t\t\t\tloop={loop}\n\t\t\t\t\t\t\tonPlay={() => this.setState({ playStatus: Sound.status.PLAYING })}\n\t\t\t\t\t\t\tonPause={() => this.setState({ playStatus: Sound.status.PAUSED })}\n\t\t\t\t\t\t\tonResume={() => this.setState({ playStatus: Sound.status.PLAYING })}\n\t\t\t\t\t\t\tonStop={() => this.setState({ playStatus: Sound.status.STOPPED, position: 0 })}\n\t\t\t\t\t\t\tonSeek={position => this.setState({ position })}\n\t\t\t\t\t\t\tonToggleLoop={e => this.setState({ loop: e.target.checked })}\n\t\t\t\t\t\t\tduration={this.state.currentSong ? this.state.currentSong.duration : 0}\n\t\t\t\t\t\t\tposition={this.state.position}\n\t\t\t\t\t\t\tplaybackRate={playbackRate}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Div>\n\t\t\t\t</Group>\n\t\t\t\t</ModalPage>\n\t\t\t</ModalRoot>\n\t\t);\n\n\t\tconst audioPlayer = (\n\t\t\t<Group>\n\t\t\t\t<Div>\n\t\t\t\t\t{this.state.playStatus == Sound.status.PLAYING &&\n\t\t\t\t\t\t<Sound\n\t\t\t\t\t\t\turl={this.state.currentSong.url}\n\t\t\t\t\t\t\tplayStatus={this.state.playStatus}\n\t\t\t\t\t\t\tposition={this.state.position}\n\t\t\t\t\t\t\tvolume={volume}\n\t\t\t\t\t\t\tplaybackRate={playbackRate}\n\t\t\t\t\t\t\tloop={loop}\n\t\t\t\t\t\t\tonLoading={({ bytesLoaded, bytesTotal }) => console.log(`${bytesLoaded / bytesTotal * 100}% loaded`)}\n\t\t\t\t\t\t\tonLoad={() => console.log('Loaded')}\n\t\t\t\t\t\t\tonPlaying={({ position }) => this.setState({ position })}\n\t\t\t\t\t\t\tonFinishedPlaying={() => this.setState({ playStatus: Sound.status.STOPPED })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t</Div>\n\t\t\t\t<FixedLayout vertical=\"bottom\">\n\t\t\t\t\t<Button size=\"xl\" level=\"secondary\" onClick={() => this.setActiveModal(MODAL_PAGE_MUSIC)}>\n\t\t\t\t\t\t\tОткрыть модальную страницу\n\t\t\t\t\t</Button>\n\t\t\t\t</FixedLayout>\n\t\t\t</Group>\n\t\t);\n\n\t\treturn (\n\t\t\t<View activePanel={this.state.activePanel} modal={modal}>\n\t\t\t\t<Home id=\"home\" fetchedUser={this.state.fetchedUser} go={this.go} player={audioPlayer}/>\n\t\t\t\t<Start id=\"scaner\" go={this.go} player={audioPlayer}/>\n\t\t\t\t<Audio id=\"audio\" go={this.go} player={audioPlayer}/>\n\t\t\t\t<Maps id=\"maps\" go={this.go} player={audioPlayer}/>\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}